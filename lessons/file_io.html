<!-- This file contains ONLY the content for the "File Handling (read, write, append)" lesson. -->
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <div class="mb-8">
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-4xl font-extrabold text-gray-900">26. File Handling (Read, Write, Append)</h1>
            <span class="bg-orange-100 text-orange-800 text-sm font-medium px-3 py-1 rounded-full">Intermediate
                Level</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 mb-6">
            <div class="bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full transition-all duration-300"
                style="width: 14.1%"></div>
        </div>
    </div>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">üìÇ</span>Interacting
            with Files</h2>
        <div class="bg-indigo-50 border-l-4 border-indigo-400 p-4 rounded-lg mb-4">
            <p class="text-lg leading-relaxed mb-2">
                So far, our Python programs have mostly worked with data in memory. However, to store data permanently
                or to process data from external sources, you need to interact with files. <strong
                    class="text-indigo-600">File handling</strong> in Python allows you to read from, write to, and
                append data to files on your computer's file system.
            </p>
            <p class="text-lg leading-relaxed mb-0">
                The basic operation for file handling involves opening a file, performing an operation (read, write,
                append), and then closing the file. It's crucial to close files to free up resources and ensure data
                integrity.
            </p>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">üîë</span>Opening
            Files: <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">open()</code> Function</h2>
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <ul class="list-disc list-inside ml-4 mt-2 text-lg leading-relaxed space-y-2">
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"r"</code>: <strong>Read Mode</strong>
                    (default). Opens a file for reading. Raises an error if the file does not exist.</li>
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"w"</code>: <strong>Write Mode</strong>.
                    Opens a file for writing. Creates a new file if it does not exist, or <strong>truncates (empties)
                        the file if it already exists.</strong> Be careful with this mode!</li>
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"a"</code>: <strong>Append Mode</strong>.
                    Opens a file for appending. Creates a new file if it does not exist. If the file exists, new data is
                    written to the end of the file.</li>
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"x"</code>: <strong>Exclusive Creation
                        Mode</strong>. Creates a new file. Raises an error if the file already exists.</li>
                <li>You can also add <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"t"</code> for text mode
                    (default) or <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"b"</code> for binary mode
                    (e.g., for images). For example, <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">"wt"</code>
                    for writing text.</li>
            </ul>
            <p class="text-lg leading-relaxed mt-4">
                It's best practice to use the <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">with</code>
                statement when dealing with files. The <code
                    class="font-mono bg-gray-100 px-1 py-0.5 rounded">with</code> statement ensures that the file is
                properly closed automatically, even if errors occur.
            </p>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">‚úçÔ∏è</span>Writing to
            Files</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">üí°</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Writing to <code>my_file.txt</code></h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">Write and Append Modes</span>
                </div>
                <pre><code><span style="color: #6272a4;"># Write mode ("w") - CAUTION: This will overwrite existing content!</span>
<span style="color: #f8f8f2;">file_path_write</span> <span style="color: #ff79c6;">=</span> <span style="color: #f1fa8c;">"my_file_write.txt"</span>
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_path_write</span>, <span style="color: #f1fa8c;">"w"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
    <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"Hello, Python file handling!\n"</span>)
    <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"This is the first line.\n"</span>)
    <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"This is the second line."</span>)
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Content written to '{file_path_write}' (overwriting existing content)."</span>)

<span style="color: #6272a4;"># Append mode ("a") - Adds content to the end of the file</span>
<span style="color: #f8f8f2;">file_path_append</span> <span style="color: #ff79c6;">=</span> <span style="color: #f1fa8c;">"my_file_append.txt"</span>
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_path_append</span>, <span style="color: #f1fa8c;">"a"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
    <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"\n--- Appended Content ---\n"</span>)
    <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"This line was appended.\n"</span>)
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Content appended to '{file_path_append}'."</span>)

<span style="color: #6272a4;"># You won't see direct output here, but files will be created/modified</span>
<span style="color: #6272a4;"># in the Pyodide virtual file system.</span></code></pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">üìñ</span>Reading from
            Files</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">üí°</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Reading from <code>my_file.txt</code></h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">Read Mode</span>
                </div>
                <pre><code><span style="color: #6272a4;"># First, let's ensure a file exists to read from</span>
<span style="color: #f8f8f2;">file_to_read</span> <span style="color: #ff79c6;">=</span> <span style="color: #f1fa8c;">"example_read.txt"</span>
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_to_read</span>, <span style="color: #f1fa8c;">"w"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">f</span>:
    <span style="color: #f8f8f2;">f</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"Line 1: This is some text.\n"</span>)
    <span style="color: #f8f8f2;">f</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"Line 2: Another line of content.\n"</span>)
    <span style="color: #f8f8f2;">f</span>.<span style="color: #50fa7b;">write</span>(<span style="color: #f1fa8c;">"Line 3: The end."</span>)

<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Created '{file_to_read}' for reading demonstration.\n"</span>)

<span style="color: #6272a4;"># Read the entire file content</span>
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_to_read</span>, <span style="color: #f1fa8c;">"r"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
    <span style="color: #f8f8f2;">content</span> <span style="color: #ff79c6;">=</span> <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">read</span>()
    <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">"--- Entire File Content ---"</span>)
    <span style="color: #50fa7b;">print</span>(<span style="color: #f8f8f2;">content</span>)

<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">"\n--- Reading line by line ---"</span>)
<span style="color: #6272a4;"># Read file line by line using a loop</span>
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_to_read</span>, <span style="color: #f1fa8c;">"r"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
    <span style="color: #ff79c6;">for</span> <span style="color: #f8f8f2;">line_num</span>, <span style="color: #f8f8f2;">line</span> <span style="color: #ff79c6;">in</span> <span style="color: #50fa7b;">enumerate</span>(<span style="color: #f8f8f2;">file</span>):
        <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Line {line_num + 1}: {line.strip()}"</span>) <span style="color: #6272a4;"># .strip() removes newline characters</span>

<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">"\n--- Reading a specific number of characters ---"</span>)
<span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f8f8f2;">file_to_read</span>, <span style="color: #f1fa8c;">"r"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
    <span style="color: #f8f8f2;">first_10_chars</span> <span style="color: #ff79c6;">=</span> <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">read</span>(<span style="color: #bd93f9;">10</span>) <span style="color: #6272a4;"># Read first 10 characters</span>
    <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"First 10 characters: '{first_10_chars}'"</span>)
    <span style="color: #f8f8f2;">remaining_content</span> <span style="color: #ff79c6;">=</span> <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">read</span>() <span style="color: #6272a4;"># Read the rest</span>
    <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Remaining content: '{remaining_content}'"</span>)</code></pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">‚ö†Ô∏è</span>Error
            Handling with Files</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">üí°</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Handling <code>FileNotFoundError</code></h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">try-except for File Errors</span>
                </div>
                <pre><code><span style="color: #ff79c6;">try</span>:
    <span style="color: #ff79c6;">with</span> <span style="color: #f8f8f2;">open</span>(<span style="color: #f1fa8c;">"non_existent_file.txt"</span>, <span style="color: #f1fa8c;">"r"</span>) <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">file</span>:
        <span style="color: #f8f8f2;">content</span> <span style="color: #ff79c6;">=</span> <span style="color: #f8f8f2;">file</span>.<span style="color: #50fa7b;">read</span>()
        <span style="color: #50fa7b;">print</span>(<span style="color: #f8f8f2;">content</span>)
<span style="color: #ff79c6;">except</span> <span style="color: #f8f8f2;">FileNotFoundError</span>:
    <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">"Error: The file 'non_existent_file.txt' was not found."</span>)
<span style="color: #ff79c6;">except</span> <span style="color: #f8f8f2;">Exception</span> <span style="color: #ff79c6;">as</span> <span style="color: #f8f8f2;">e</span>:
    <span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"An unexpected error occurred: {e}"</span>)</code></pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800">üß™ Try it Yourself</h2>
        <p class="text-lg leading-relaxed mb-4">
            Write a Python program that:
        <ol class="list-decimal list-inside ml-4 mt-2 text-lg leading-relaxed space-y-2">
            <li>Creates a file named <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">my_notes.txt</code>.</li>
            <li>Writes three lines of notes to it.</li>
            <li>Appends two more lines to the same file.</li>
            <li>Reads the entire content of <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">my_notes.txt</code>
                and prints it.</li>
            <li>Attempts to read from a file that you know does not exist, and handles the
                <code>FileNotFoundError</code>.
            </li>
        </ol>
        </p>
        <div id="code-editor-container"
            data-default-code="# Your code goes here\n\n# 1. Create and write to my_notes.txt\nfile_name = \"
            my_notes.txt\"\nprint(f\"--- Writing to {file_name} ---\")\nwith open(file_name, \"w\") as f:\n f.write(\"My
            first note.\\n\")\n f.write(\"Learning Python is fun!\\n\")\n f.write(\"Remember to practice
            daily.\\n\")\nprint(\"Initial notes written.\")\n\n# 2. Append to my_notes.txt\nprint(f\"\\n--- Appending to
            {file_name} ---\")\nwith open(file_name, \"a\") as f:\n f.write(\"Added another important thought.\\n\")\n
            f.write(\"Don't forget to review built-in functions!\")\nprint(\"More notes appended.\")\n\n# 3. Read and
            print the entire content of my_notes.txt\nprint(f\"\\n--- Reading from {file_name} ---\")\ntry:\n with
            open(file_name, \"r\") as f:\n content=f.read()\n print(\"File content:\")\n print(content)\nexcept
            FileNotFoundError:\n print(f\"Error: Could not find {file_name} to read.\")\nexcept Exception as e:\n
            print(f\"An error occurred while reading: {e}\")\n\n# 4. Attempt to read from a non-existent file and handle
            the error\nprint("\n--- Attempting to read non_existent_file.txt ---")\ntry:\n with
            open("non_existent_file_for_test.txt", "r" ) as f:\n content=f.read()\n print(content)\nexcept
            FileNotFoundError:\n print("Successfully caught FileNotFoundError: The file does not exist as
            expected.")\nexcept Exception as e:\n print(f"An unexpected error occurred: {e}")">
            <!-- The code editor will be injected here by JS -->
            <script type="text/plain" id="default-code">
# Your code goes here

# 1. Create and write to my_notes.txt
file_name = "my_notes.txt"
print(f"--- Writing to {file_name} ---")
with open(file_name, "w") as f:
    f.write("My first note.\n")
    f.write("Learning Python is fun!\n")
    f.write("Remember to practice daily.\n")
print("Initial notes written.")

# 2. Append to my_notes.txt
print(f"\n--- Appending to {file_name} ---")
with open(file_name, "a") as f:
    f.write("Added another important thought.\n")
    f.write("Don't forget to review built-in functions!")
print("More notes appended.")

# 3. Read and print the entire content of my_notes.txt
print(f"\n--- Reading from {file_name} ---")
try:
    with open(file_name, "r") as f:
        content = f.read()
        print("File content:")
        print(content)
except FileNotFoundError:
    print(f"Error: Could not find {file_name} to read.")
except Exception as e:
    print(f"An error occurred while reading: {e}")

# 4. Attempt to read from a non-existent file and handle the error
print("\n--- Attempting to read non_existent_file.txt ---")
try:
    with open("non_existent_file_for_test.txt", "r") as f:
        content = f.read()
        print(content)
except FileNotFoundError:
    print("Successfully caught FileNotFoundError: The file does not exist as expected.")
except Exception as e:
    print(f"An unexpected error occurred: {e}")
            </script>
        </div>
    </section>
    <!-- Challenge/Homework Section -->
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-orange-700 flex items-center">
            <span class="bg-orange-100 text-orange-600 p-2 rounded-lg mr-3">üèÜ</span>
            Challenge: Simple Log File Analyzer
        </h2>
        <div class="bg-gradient-to-r from-orange-50 to-pink-50 p-6 rounded-lg border-l-4 border-orange-500">
            <p class="text-lg leading-relaxed mb-4">
                <strong>Project Goal:</strong> Practice file reading and writing by building a simple log file analyzer.
                You'll use file operations, loops, and string methods.
            </p>
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-gray-800 mb-3">üìã Requirements:</h3>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li>‚Ä¢ Create a file called <code class="bg-gray-100 px-1 rounded">log.txt</code> and write
                            several lines to it (some lines should contain the word "ERROR").</li>
                        <li>‚Ä¢ Read the file and count how many lines contain "ERROR".</li>
                        <li>‚Ä¢ Print the total number of lines and the number of error lines.</li>
                        <li>‚Ä¢ Append a summary line to the file with the results.</li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-gray-800 mb-3">üí° Tips:</h3>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li>‚Ä¢ Use <code class="bg-gray-100 px-1 rounded">with</code> for all file operations.</li>
                        <li>‚Ä¢ Use <code class="bg-gray-100 px-1 rounded">in</code> to check if "ERROR" is in a line.
                        </li>
                        <li>‚Ä¢ Use <code class="bg-gray-100 px-1 rounded">strip()</code> to clean up lines when printing.
                        </li>
                    </ul>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg border border-gray-200 mt-4">
                <h3 class="font-semibold text-gray-800 mb-2">Sample Output:</h3>
                <pre class="bg-gray-900 text-green-400 p-3 rounded text-sm overflow-x-auto">Total lines: 5
Error lines: 2

# (And the following line is appended to log.txt:)
# SUMMARY: 2 errors out of 5 lines
</pre>
            </div>
        </div>
    </section>
    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
        <a href="#" onclick="loadLesson('lessons/map_filter_reduce.html')"
            class="flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Previous: Map, Filter, Reduce
        </a>
        <div class="text-gray-600">
            <span class="text-sm">Lesson 26 of 71</span>
        </div>
        <a href="#" onclick="loadLesson('lessons/modules_packages.html')"
            class="flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
            Next: Modules and Packages
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
</div>