<!-- This file contains ONLY the content for the "Unit Testing (unittest, pytest)" lesson. -->
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <div class="mb-8">
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-4xl font-extrabold text-gray-900">45. Unit Testing (unittest, pytest)</h1>
            <span
                class="bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full whitespace-nowrap">Advanced
                Level</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 mb-6">
            <!-- Progress bar: (45-39)/18 = 33.3% for advanced (lessons 40-57) -->
            <div class="bg-gradient-to-r from-indigo-500 to-purple-500 h-3 rounded-full transition-all duration-300"
                style="width: 33.3%"></div>
        </div>
    </div>

    <section class="mb-8">
        <div class="relative mb-8">
            <div class="absolute -top-6 left-6 z-10">
                <span
                    class="inline-flex items-center justify-center w-14 h-14 bg-blue-100 bg-opacity-80 backdrop-blur-md border-4 border-blue-300 shadow-lg rounded-full text-3xl text-blue-600 transition-transform duration-200 hover:scale-110 animate-fade-in">üß™</span>
            </div>
            <div
                class="bg-gradient-to-br from-blue-50/80 to-white/80 backdrop-blur-md border-2 border-blue-200 shadow-xl rounded-2xl p-8 pt-12 animate-fade-in">
                <h2 class="text-3xl font-extrabold mb-4 text-blue-800 tracking-tight">Why Unit Testing Matters</h2>
                <p class="text-lg leading-relaxed mb-4">
                    <strong class="text-blue-600">Unit testing</strong> is the practice of writing small, automated
                    tests for individual pieces of your code (usually functions or classes). Good unit tests help you
                    catch bugs early, refactor safely, and build reliable software.
                </p>
                <p class="text-lg leading-relaxed mb-4">
                    Python has two main tools for unit testing: the built-in <code
                        class="font-mono bg-gray-100 px-1 py-0.5 rounded">unittest</code> module and the popular
                    third-party <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">pytest</code> framework. Both
                    let you write tests, check results, and automate your quality checks.
                </p>
                <p class="text-lg leading-relaxed mb-4">
                    <strong>Real-world scenarios:</strong>
                <ul class="list-disc list-inside ml-6 mt-2 text-lg leading-relaxed">
                    <li>Ensuring new features don't break existing code (regression testing)</li>
                    <li>Refactoring code with confidence</li>
                    <li>Testing edge cases and error handling</li>
                    <li>Automating checks in CI/CD pipelines</li>
                    <li>Documenting expected behavior for other developers</li>
                </ul>
                </p>
                <p class="text-lg leading-relaxed">
                    Unit testing is a core skill for any professional Python developer.
                </p>
            </div>
        </div>
    </section>

    <section class="mb-8">
        <div class="relative mb-8">
            <div class="absolute -top-6 left-6 z-10">
                <span
                    class="inline-flex items-center justify-center w-14 h-14 bg-blue-100 bg-opacity-80 backdrop-blur-md border-4 border-blue-300 shadow-lg rounded-full text-3xl text-blue-600 transition-transform duration-200 hover:scale-110 animate-fade-in">üí°</span>
            </div>
            <div
                class="bg-gradient-to-br from-blue-50/80 to-white/80 backdrop-blur-md border-2 border-blue-200 shadow-xl rounded-2xl p-8 pt-12 animate-fade-in">
                <h2 class="text-3xl font-extrabold mb-4 text-blue-800 tracking-tight">Key Concepts: unittest & pytest
                </h2>
                <ul
                    class="list-disc list-inside ml-4 mt-2 text-lg leading-relaxed space-y-2 bg-white/90 border-l-4 border-blue-300 shadow-md rounded-xl p-6 animate-fade-in">
                    <li><strong class="text-blue-600">Test Case:</strong> A single test, usually a method that checks
                        one aspect of your code.</li>
                    <li><strong class="text-blue-600">Test Suite:</strong> A collection of test cases that can be run
                        together.</li>
                    <li><strong class="text-blue-600">Assertions:</strong> Statements that check if a condition is true
                        (e.g., <code>assertEqual</code>, <code>assertTrue</code>, <code>assertRaises</code>).</li>
                    <li><strong class="text-blue-600">Fixtures:</strong> Setup and teardown code that runs before/after
                        tests (e.g., creating test data, cleaning up files).</li>
                    <li><strong class="text-blue-600">Test Discovery:</strong> Automatically finding and running all
                        tests in your project.</li>
                </ul>
                <div class="mt-6">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">Basic unittest Example</h3>
                    <div class="code-editor-example mb-6 rounded-2xl">
                        <div class="code-editor-bar">
                            <div class="code-editor-dots flex gap-1">
                                <div class="code-editor-dot-red"></div>
                                <div class="code-editor-dot-yellow"></div>
                                <div class="code-editor-dot-green"></div>
                            </div>
                        </div>
                        <span class="text-gray-400 text-xs">test_math.py</span>
                        <pre><code><span style="color: #ff79c6;">import</span> <span style="color: #8be9fd;">unittest</span>

<span style="color: #6272a4;"># Function to test</span>
<span style="color: #ff79c6;">def</span> <span style="color: #50fa7b;">add</span>(<span style="color: #8be9fd;">a</span>, <span style="color: #8be9fd;">b</span>):
    <span style="color: #ff79c6;">return</span> <span style="color: #8be9fd;">a</span> <span style="color: #ff79c6;">+</span> <span style="color: #8be9fd;">b</span>

<span style="color: #6272a4;"># Unit test class</span>
<span style="color: #ff79c6;">class</span> <span style="color: #50fa7b;">TestAdd</span>(<span style="color: #8be9fd;">unittest</span>.<span style="color: #50fa7b;">TestCase</span>):
    <span style="color: #ff79c6;">def</span> <span style="color: #50fa7b;">test_add_positive</span>(<span style="color: #8be9fd;">self</span>):
        <span style="color: #8be9fd;">result</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">add</span>(<span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>)
        <span style="color: #8be9fd;">self</span>.<span style="color: #50fa7b;">assertEqual</span>(<span style="color: #8be9fd;">result</span>, <span style="color: #bd93f9;">5</span>)

<span style="color: #50fa7b;">unittest</span>.<span style="color: #50fa7b;">main</span>()
</code></pre>
                    </div>
                    <div class="bg-gray-900 p-4 rounded-2xl mt-4">
                        <h3 class="text-white font-semibold mb-3">üí° Expected Output:</h3>
                        <pre class="text-green-400 text-sm"><code>.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK</code></pre>
                    </div>
                </div>
                <div class="mt-6">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">pytest Example (More Concise)</h3>
                    <div class="code-editor-example mb-6 rounded-2xl">
                        <div class="code-editor-bar">
                            <div class="code-editor-dots flex gap-1">
                                <div class="code-editor-dot-red"></div>
                                <div class="code-editor-dot-yellow"></div>
                                <div class="code-editor-dot-green"></div>
                            </div>
                        </div>
                        <span class="text-gray-400 text-xs">test_math_pytest.py</span>
                        <pre><code><span style="color: #6272a4;">def</span> <span style="color: #50fa7b;">add</span>(<span style="color: #f8f8f2;">a</span>, <span style="color: #f8f8f2;">b</span>):
    <span style="color: #ff79c6;">return</span> <span style="color: #f8f8f2;">a</span> <span style="color: #ff79c6;">+</span> <span style="color: #f8f8f2;">b</span>

def test_add():
    <span style="color: #6272a4;">assert</span> <span style="color: #50fa7b;">add</span>(<span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>) <span style="color: #ff79c6;">==</span> <span style="color: #bd93f9;">5</span>
</code></pre>
                    </div>
                    <div class="bg-gray-900 p-4 rounded-2xl mt-4">
                        <h3 class="text-white font-semibold mb-3">üí° Expected Output:</h3>
                        <pre class="text-green-400 text-sm"><code>============================= test session starts ==============================
collected 1 item

test_math_pytest.py .                                                  [100%]

============================== 1 passed in 0.01s ==============================
</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-green-700 flex items-center">
            <span class="bg-green-100 text-green-600 p-2 rounded-lg mr-3">üß™</span>
            Try it Yourself
        </h2>
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm mb-6">
            <p class="text-lg leading-relaxed mb-4">
                Write a function <code>is_even(n)</code> that returns <code>True</code> if <code>n</code> is even,
                <code>False</code> otherwise. Then write a unit test (using <code>unittest</code>) to check that it
                works for several values.
            </p>
        </div>
        <!-- Code Editor Area -->
        <div id="code-editor-container" class="bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"></div>
        <script type="text/plain" id="default-code">
import unittest

def is_even(n):
    return n % 2 == 0

class TestIsEven(unittest.TestCase):
    def test_even(self):
        self.assertTrue(is_even(2))
        self.assertTrue(is_even(100))
    def test_odd(self):
        self.assertFalse(is_even(3))
        self.assertFalse(is_even(101))

if __name__ == "__main__":
    unittest.main()
        </script>
    </section>

    <!-- Challenge Section -->
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-purple-700 flex items-center">
            <span class="bg-purple-100 text-purple-600 p-2 rounded-lg mr-3">üèÜ</span>
            Project Challenge: Test Suite for a Real Application
        </h2>
        <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg border-l-4 border-purple-500">
            <p class="text-lg leading-relaxed mb-4">
                <strong>Real-World Project:</strong> Design and implement a comprehensive unit test suite for a
                multi-module Python application (e.g., a calculator, web API, or data processing pipeline). This project
                requires you to think about test coverage, edge cases, and maintainability.
            </p>
            <ul class="list-decimal list-inside ml-4 mt-2 text-lg leading-relaxed space-y-2">
                <li>Identify the modules and functions/classes to test (e.g., <code>calculator.py</code>,
                    <code>api.py</code>, <code>utils.py</code>).
                </li>
                <li>Write tests for normal cases, edge cases, and error handling.</li>
                <li>Organize your tests using <code>unittest</code> or <code>pytest</code> (use fixtures if needed).
                </li>
                <li>Automate test discovery and running (e.g., with <code>pytest</code> or
                    <code>python -m unittest discover</code>).
                </li>
                <li>Document your test strategy: how to add new tests, how to run them, and how to interpret results.
                </li>
                <li>Bonus: Add code coverage measurement and reporting.</li>
            </ul>
            <div class="bg-gray-900 p-4 rounded-lg mt-6">
                <h3 class="text-white font-semibold mb-3">üí° Project Example Output:</h3>
                <pre class="text-green-400 text-sm"><code>============================= test session starts ==============================
collected 12 items

test_calculator.py .......                                            [ 58%]
test_api.py ....                                                      [ 91%]
test_utils.py ..                                                      [100%]

============================== 12 passed in 0.05s ==============================
</code></pre>
            </div>
            <p class="text-md text-gray-600 mt-4">This project will challenge you to design a maintainable, thorough
                test suite for real-world code. Think about modularity, automation, and how your tests will help future
                developers.</p>
        </div>
    </section>

    <!-- Navigation Buttons -->
    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
        <a href="#" onclick="loadLesson('lessons/logging.html')"
            class="flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Previous: Logging
        </a>
        <div class="text-gray-600">
            <span class="text-sm">Lesson 45 of 71</span>
        </div>
        <a href="#" onclick="loadLesson('lessons/debugging.html')"
            class="flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
            Next: Debugging
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
</div>