<!-- This file contains ONLY the content for the "Map, Filter, Reduce" lesson. -->
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <div class="mb-8">
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-4xl font-extrabold text-gray-900">25. Map, Filter, Reduce</h1>
            <span class="bg-orange-100 text-orange-800 text-sm font-medium px-3 py-1 rounded-full">Intermediate
                Level</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 mb-6">
            <div class="bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full transition-all duration-300"
                style="width: 22.2%"></div>
        </div>
    </div>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">⚡</span>Powerful
            Functional Tools</h2>
        <div class="bg-indigo-50 border-l-4 border-indigo-400 p-4 rounded-lg mb-4">
            <p class="text-lg leading-relaxed mb-2">
                <strong class="text-indigo-600">map()</strong>, <strong class="text-indigo-600">filter()</strong>, and
                <strong class="text-indigo-600">reduce()</strong> are higher-order functions in Python that let you
                process iterables in a concise, functional style. They are especially useful with <a href="#"
                    data-lesson-path="lessons/lambda_functions.html" class="text-indigo-600 hover:underline">lambda
                    functions</a> for short, on-the-fly operations.
            </p>
            <ul class="list-disc list-inside ml-4 mt-2 text-lg leading-relaxed">
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">map(function, iterable)</code>: Transform
                    each item in an iterable.</li>
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">filter(function, iterable)</code>: Select
                    items from an iterable based on a condition.</li>
                <li><code class="font-mono bg-gray-100 px-1 py-0.5 rounded">reduce(function, iterable)</code>: Reduce an
                    iterable to a single value (from <code
                        class="font-mono bg-gray-100 px-1 py-0.5 rounded">functools</code>).</li>
            </ul>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">💡</span>map()
            Examples</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">💡</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Squaring and Cubing Numbers</h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">map() with def and lambda</span>
                </div>
                <pre><code><span style="color: #6272a4;"># Square and cube numbers using map</span>
<span style="color: #f8f8f2;">numbers</span> <span style="color: #ff79c6;">=</span> [<span style="color: #bd93f9;">1</span>, <span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>, <span style="color: #bd93f9;">4</span>, <span style="color: #bd93f9;">5</span>]

def <span style="color: #50fa7b;">square</span>(<span style="color: #f8f8f2;">num</span>):
    <span style="color: #ff79c6;">return</span> <span style="color: #f8f8f2;">num</span> <span style="color: #ff79c6;">*</span> <span style="color: #f8f8f2;">num</span>
<span style="color: #f8f8f2;">squared_numbers</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">map</span>(<span style="color: #50fa7b;">square</span>, <span style="color: #f8f8f2;">numbers</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Squared (using def): {squared_numbers}"</span>)

<span style="color: #f8f8f2;">cubed_numbers</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">map</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">x</span>: <span style="color: #f8f8f2;">x</span><span style="color: #ff79c6;">**</span><span style="color: #bd93f9;">3</span>, <span style="color: #f8f8f2;">numbers</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Cubed (using lambda): {cubed_numbers}"</span>)

<span style="color: #6272a4;"># Map with multiple iterables</span>
<span style="color: #f8f8f2;">list1</span> <span style="color: #ff79c6;">=</span> [<span style="color: #bd93f9;">1</span>, <span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>]
<span style="color: #f8f8f2;">list2</span> <span style="color: #ff79c6;">=</span> [<span style="color: #bd93f9;">10</span>, <span style="color: #bd93f9;">20</span>, <span style="color: #bd93f9;">30</span>]
<span style="color: #f8f8f2;">sum_lists</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">map</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">x</span>, <span style="color: #f8f8f2;">y</span>: <span style="color: #f8f8f2;">x</span> <span style="color: #ff79c6;">+</span> <span style="color: #f8f8f2;">y</span>, <span style="color: #f8f8f2;">list1</span>, <span style="color: #f8f8f2;">list2</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Sum of elements from two lists: {sum_lists}"</span>)</code></pre>
            </div>
            <div class="example-output bg-green-50 border-l-4 border-green-400 p-4 rounded-lg mt-2">
                <h4 class="font-semibold text-green-700 mb-2 flex items-center">
                    <span class="text-green-500 mr-2">📤</span>
                    Expected Output
                </h4>
                <pre class="bg-gray-900 text-green-400 p-3 rounded text-sm overflow-x-auto">Squared (using def): [1, 4, 9, 16, 25]
Cubed (using lambda): [1, 8, 27, 64, 125]
Sum of elements from two lists: [11, 22, 33]</pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">💡</span>filter()
            Examples</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">💡</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Filtering Numbers and Words</h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">filter() with def and lambda</span>
                </div>
                <pre><code><span style="color: #6272a4;"># Filter even and odd numbers, and long words</span>
<span style="color: #f8f8f2;">numbers</span> <span style="color: #ff79c6;">=</span> [<span style="color: #bd93f9;">1</span>, <span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>, <span style="color: #bd93f9;">4</span>, <span style="color: #bd93f9;">5</span>, <span style="color: #bd93f9;">6</span>, <span style="color: #bd93f9;">7</span>, <span style="color: #bd93f9;">8</span>, <span style="color: #bd93f9;">9</span>, <span style="color: #bd93f9;">10</span>]

<span style="color: #ff79c6;">def</span> <span style="color: #50fa7b;">is_even</span>(<span style="color: #f8f8f2;">num</span>):
    <span style="color: #ff79c6;">return</span> <span style="color: #f8f8f2;">num</span> <span style="color: #ff79c6;">%</span> <span style="color: #bd93f9;">2</span> <span style="color: #ff79c6;">==</span> <span style="color: #bd93f9;">0</span>
<span style="color: #f8f8f2;">even_numbers</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">filter</span>(<span style="color: #50fa7b;">is_even</span>, <span style="color: #f8f8f2;">numbers</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Even numbers (using def): {even_numbers}"</span>)

<span style="color: #f8f8f2;">odd_numbers</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">filter</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">num</span>: <span style="color: #f8f8f2;">num</span> <span style="color: #ff79c6;">%</span> <span style="color: #bd93f9;">2</span> <span style="color: #ff79c6;">!=</span> <span style="color: #bd93f9;">0</span>, <span style="color: #f8f8f2;">numbers</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Odd numbers (using lambda): {odd_numbers}"</span>)

<span style="color: #f8f8f2;">words</span> <span style="color: #ff79c6;">=</span> [<span style="color: #f1fa8c;">"apple"</span>, <span style="color: #f1fa8c;">"banana"</span>, <span style="color: #f1fa8c;">"kiwi"</span>, <span style="color: #f1fa8c;">"grapefruit"</span>, <span style="color: #f1fa8c;">"orange"</span>]
<span style="color: #f8f8f2;">long_words</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">list</span>(<span style="color: #50fa7b;">filter</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">word</span>: <span style="color: #50fa7b;">len</span>(<span style="color: #f8f8f2;">word</span>) <span style="color: #ff79c6;">></span> <span style="color: #bd93f9;">5</span>, <span style="color: #f8f8f2;">words</span>))
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Long words: {long_words}"</span>)</code></pre>
            </div>
            <div class="example-output bg-green-50 border-l-4 border-green-400 p-4 rounded-lg mt-2">
                <h4 class="font-semibold text-green-700 mb-2 flex items-center">
                    <span class="text-green-500 mr-2">📤</span>
                    Expected Output
                </h4>
                <pre class="bg-gray-900 text-green-400 p-3 rounded text-sm overflow-x-auto">Even numbers (using def): [2, 4, 6, 8, 10]
Odd numbers (using lambda): [1, 3, 5, 7, 9]
Long words: ['banana', 'grapefruit', 'orange']</pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">💡</span>reduce()
            Examples</h2>
        <div class="example-section bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8 shadow-sm">
            <div class="flex items-center mb-3">
                <span class="text-blue-500 text-xl mr-2">💡</span>
                <h3 class="text-xl font-semibold text-blue-800">Example: Summing, Multiplying, and Finding Max</h3>
            </div>
            <div class="code-editor-example mb-4">
                <div class="code-editor-bar">
                    <div class="code-editor-dots flex gap-2">
                        <div class="code-editor-dot-red"></div>
                        <div class="code-editor-dot-yellow"></div>
                        <div class="code-editor-dot-green"></div>
                    </div>
                    <span class="text-gray-400 text-xs">reduce() from functools</span>
                </div>
                <pre><code><span style="color: #50fa7b;">from</span> <span style="color: #f8f8f2;">functools</span> <span style="color: #50fa7b;">import</span> <span style="color: #f8f8f2;">reduce</span>
<span style="color: #f8f8f2;">numbers</span> <span style="color: #ff79c6;">=</span> [<span style="color: #bd93f9;">1</span>, <span style="color: #bd93f9;">2</span>, <span style="color: #bd93f9;">3</span>, <span style="color: #bd93f9;">4</span>, <span style="color: #bd93f9;">5</span>]

<span style="color: #f8f8f2;">sum_result</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">reduce</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">x</span>, <span style="color: #f8f8f2;">y</span>: <span style="color: #f8f8f2;">x</span> <span style="color: #ff79c6;">+</span> <span style="color: #f8f8f2;">y</span>, <span style="color: #f8f8f2;">numbers</span>)
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Sum using reduce: {sum_result}"</span>)

<span style="color: #f8f8f2;">product_result</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">reduce</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">x</span>, <span style="color: #f8f8f2;">y</span>: <span style="color: #f8f8f2;">x</span> <span style="color: #ff79c6;">*</span> <span style="color: #f8f8f2;">y</span>, <span style="color: #f8f8f2;">numbers</span>)
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Product using reduce: {product_result}"</span>)

<span style="color: #f8f8f2;">max_element</span> <span style="color: #ff79c6;">=</span> <span style="color: #50fa7b;">reduce</span>(<span style="color: #ff79c6;">lambda</span> <span style="color: #f8f8f2;">a</span>, <span style="color: #f8f8f2;">b</span>: <span style="color: #f8f8f2;">a</span> <span style="color: #ff79c6;">if</span> <span style="color: #f8f8f2;">a</span> <span style="color: #ff79c6;">></span> <span style="color: #f8f8f2;">b</span> <span style="color: #ff79c6;">else</span> <span style="color: #f8f8f2;">b</span>, <span style="color: #f8f8f2;">numbers</span>)
<span style="color: #50fa7b;">print</span>(<span style="color: #f1fa8c;">f"Max element using reduce: {max_element}"</span>)</code></pre>
            </div>
            <div class="example-output bg-green-50 border-l-4 border-green-400 p-4 rounded-lg mt-2">
                <h4 class="font-semibold text-green-700 mb-2 flex items-center">
                    <span class="text-green-500 mr-2">📤</span>
                    Expected Output
                </h4>
                <pre class="bg-gray-900 text-green-400 p-3 rounded text-sm overflow-x-auto">Sum using reduce: 15
Product using reduce: 120
Max element using reduce: 5</pre>
            </div>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center"><span class="mr-2">💡</span>When to Use
            Map, Filter, and Reduce</h2>
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg">
            <p class="text-lg leading-relaxed mb-4">
                <strong>map()</strong>: Transform each item in an iterable.<br>
                <strong>filter()</strong>: Select a subset of items based on a condition.<br>
                <strong>reduce()</strong>: Reduce an iterable to a single cumulative result.
            </p>
            <p class="text-lg leading-relaxed mb-0">
                List comprehensions are often more "Pythonic" for <code
                    class="font-mono bg-gray-100 px-1 py-0.5 rounded">map()</code> and <code
                    class="font-mono bg-gray-100 px-1 py-0.5 rounded">filter()</code>, but understanding these functions
                is crucial for functional programming and working with existing codebases.
            </p>
        </div>
    </section>
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800">🧪 Try it Yourself</h2>
        <p class="text-lg leading-relaxed mb-4">
            Practice using <code class="font-mono bg-gray-100 px-1 py-0.5 rounded">map()</code>, <code
                class="font-mono bg-gray-100 px-1 py-0.5 rounded">filter()</code>, and <code
                class="font-mono bg-gray-100 px-1 py-0.5 rounded">reduce()</code> to manipulate lists.
        </p>
        <div id="code-editor-container"
            data-default-code="from functools import reduce\n\n# List of prices\nprices = [10.50, 20.75, 15.00, 5.25, 30.00]\n\n# 1. Use map() to apply a 10% discount to each price.\n# Round the discounted prices to 2 decimal places.\ndiscounted_prices = list(map(lambda p: round(p * 0.90, 2), prices))\nprint(f\"
            Original prices: {prices}\")\nprint(f\"Discounted prices: {discounted_prices}\")\n\nprint(\"\\n---\")\n\n#
            2. Use filter() to get only prices greater than or equal to $15.\nhigh_value_items=list(filter(lambda p: p>=
            15.00, prices))\nprint(f\"High-value items (>= $15): {high_value_items}\")\n\nprint(\"\\n---\")\n\n# 3. Use
            reduce() to calculate the total sum of the discounted prices.\ntotal_discounted_sum = reduce(lambda x, y: x
            + y, discounted_prices)\nprint(f\"Total sum of discounted prices:
            {total_discounted_sum:.2f}\")\n\nprint(\"\\n---\")\n\n# Challenge: Combine filter and map\n# Get only the
            even numbers from 1 to 20, then square them.\nnumbers_1_to_20 = range(1, 21)\neven_numbers =
            list(filter(lambda x: x % 2 == 0, numbers_1_to_20))\nsquared_evens = list(map(lambda x: x**2,
            even_numbers))\nprint(f\"Even numbers from 1 to 20: {even_numbers}\")\nprint(f\"Squared even numbers:
            {squared_evens}\")">
            <script type="text/plain" id="default-code">
from functools import reduce

# List of prices
prices = [10.50, 20.75, 15.00, 5.25, 30.00]

# 1. Use map() to apply a 10% discount to each price.
# Round the discounted prices to 2 decimal places.
discounted_prices = list(map(lambda p: round(p * 0.90, 2), prices))
print(f"Original prices: {prices}")
print(f"Discounted prices: {discounted_prices}")

print("\n---")

# 2. Use filter() to get only prices greater than or equal to $15.
high_value_items = list(filter(lambda p: p >= 15.00, prices))
print(f"High-value items (>= $15): {high_value_items}")

print("\n---")

# 3. Use reduce() to calculate the total sum of the discounted prices.
total_discounted_sum = reduce(lambda x, y: x + y, discounted_prices)
print(f"Total sum of discounted prices: {total_discounted_sum:.2f}")

print("\n---")

# Challenge: Combine filter and map
# Get only the even numbers from 1 to 20, then square them.
numbers_1_to_20 = range(1, 21)
even_numbers = list(filter(lambda x: x % 2 == 0, numbers_1_to_20))
squared_evens = list(map(lambda x: x**2, even_numbers))
print(f"Even numbers from 1 to 20: {even_numbers}")
print(f"Squared even numbers: {squared_evens}")
            </script>
        </div>
    </section>
    <!-- Challenge/Homework Section -->
    <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-orange-700 flex items-center">
            <span class="bg-orange-100 text-orange-600 p-2 rounded-lg mr-3">🏆</span>
            Challenge: Shopping Cart Analyzer with Map, Filter, Reduce
        </h2>
        <div class="bg-gradient-to-r from-orange-50 to-pink-50 p-6 rounded-lg border-l-4 border-orange-500">
            <p class="text-lg leading-relaxed mb-4">
                <strong>Project Goal:</strong> Build a mini shopping cart analyzer that uses <span
                    class="text-indigo-600 font-semibold">map</span>, <span
                    class="text-indigo-600 font-semibold">filter</span>, and <span
                    class="text-indigo-600 font-semibold">reduce</span> together with Level 1 concepts (variables,
                lists, loops, conditionals, etc.).
            </p>
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-gray-800 mb-3">📋 Requirements:</h3>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li>• Create a list of product dictionaries, each with a <code
                                class="bg-gray-100 px-1 rounded">'name'</code> and <code
                                class="bg-gray-100 px-1 rounded">'price'</code>.</li>
                        <li>• Use <code class="bg-gray-100 px-1 rounded">map()</code> to apply a discount to all
                            products.</li>
                        <li>• Use <code class="bg-gray-100 px-1 rounded">filter()</code> to find products above a
                            certain price.</li>
                        <li>• Use <code class="bg-gray-100 px-1 rounded">reduce()</code> to calculate the total price of
                            all products after discount.</li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-gray-800 mb-3">💡 Tips:</h3>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li>• Use <code class="bg-gray-100 px-1 rounded">lambda</code> functions for quick operations.
                        </li>
                        <li>• Try different discount rates and price thresholds.</li>
                        <li>• Print the list of discounted products and the total.</li>
                    </ul>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg border border-gray-200 mt-4">
                <h3 class="font-semibold text-gray-800 mb-2">Sample Output:</h3>
                <pre class="bg-gray-900 text-green-400 p-3 rounded text-sm overflow-x-auto">Discounted products:
{'name': 'Laptop', 'price': 960.0}
{'name': 'Mouse', 'price': 20.0}
{'name': 'Keyboard', 'price': 60.0}
{'name': 'Monitor', 'price': 240.0}

Filtered products (>= $100):
{'name': 'Laptop', 'price': 960.0}
{'name': 'Monitor', 'price': 240.0}

Total price of filtered products: 1200.0
</pre>
            </div>
        </div>
    </section>
    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
        <a href="#" onclick="loadLesson('lessons/lambda_functions.html')"
            class="flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Previous: Lambda Functions
        </a>
        <div class="text-gray-600">
            <span class="text-sm">Lesson 25 of 71</span>
        </div>
        <a href="#" onclick="loadLesson('lessons/file_io.html')"
            class="flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200">
            Next: File Handling
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
</div>