<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <h1 class="text-3xl font-extrabold mb-6 text-indigo-700">üèÜ Advanced Grand Challenge: Hangman Game</h1>
    <div class="bg-gradient-to-r from-indigo-50 to-purple-50 border-l-4 border-indigo-400 p-6 mb-8">
        <h2 class="text-xl font-bold text-indigo-800 mb-3">üéØ Challenge Overview</h2>
        <p class="text-gray-700 leading-relaxed mb-4">
            Your Task: Implement the Hangman game with the following features:
        </p>
        <ul class="list-disc list-inside text-gray-700 space-y-2">
            <li><b>Categorized Word Selection:</b> Words should be chosen from different categories (e.g., Animals,
                Fruits, Countries).</li>
            <li><b>Difficulty Levels:</b> Implement Easy, Medium, and Hard modes, which affect the number of lives
                given.</li>
            <li><b>Display Word:</b> Show the word to the player with unguessed letters replaced by underscores (e.g.,
                <code>_ _ _ _ _ _</code>).
            </li>
            <li><b>Guessing:</b> Allow the player to guess one letter at a time.</li>
            <li><b>Track Guesses:</b> Keep track of letters already guessed (both correct and incorrect). Display them
                clearly.</li>
            <li><b>Lives/Attempts:</b> Give the player a limited number of incorrect guesses.</li>
            <li><b>Feedback:</b>
                <ul class="list-disc ml-6">
                    <li>If the guess is correct, reveal the letter(s) in the word.</li>
                    <li>If the guess is incorrect, decrement a "life" and inform the player.</li>
                    <li>If a letter has already been guessed, inform the player and don't penalize them.</li>
                    <li>Handle non-alphabetic or multi-character input gracefully.</li>
                </ul>
            </li>
            <li><b>ASCII Art Hangman:</b> Display a visual representation of the hangman as lives decrease.</li>
            <li><b>Win/Loss Condition:</b>
                <ul class="list-disc ml-6">
                    <li>Player wins if they guess all letters in the word.</li>
                    <li>Player loses if they run out of lives.</li>
                </ul>
            </li>
            <li><b>Game Loop:</b> The game should continue until the word is guessed or lives run out.</li>
            <li><b>Play Again Option:</b> After a game ends, offer the player an option to play again.</li>
        </ul>
    </div>

    <div class="grid md:grid-cols-2 gap-8 mb-8">
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
            <h3 class="text-lg font-bold text-yellow-800 mb-3">üéÆ Game Requirements</h3>
            <ul class="space-y-2 text-gray-700">
                <li>‚Ä¢ Display the hangman ASCII art</li>
                <li>‚Ä¢ Show word with underscores for unguessed letters</li>
                <li>‚Ä¢ Track and display guessed letters</li>
                <li>‚Ä¢ Count remaining attempts (6 total)</li>
                <li>‚Ä¢ Validate user input (single letters only)</li>
                <li>‚Ä¢ Handle repeated guesses gracefully</li>
                <li>‚Ä¢ Determine win/lose conditions</li>
                <li>‚Ä¢ Allow multiple games</li>
            </ul>
        </div>

        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
            <h3 class="text-lg font-bold text-green-800 mb-3">üí° Advanced Concepts Used</h3>
            <ul class="space-y-2 text-gray-700">
                <li>‚Ä¢ Advanced function design and composition</li>
                <li>‚Ä¢ Comprehensive error handling and validation</li>
                <li>‚Ä¢ File I/O and data persistence</li>
                <li>‚Ä¢ Complex string manipulation and formatting</li>
                <li>‚Ä¢ Advanced list comprehensions and generators</li>
                <li>‚Ä¢ Dictionary operations and data structures</li>
                <li>‚Ä¢ State management and game logic</li>
                <li>‚Ä¢ User experience and interface design</li>
                <li>‚Ä¢ Code organization and modularity</li>
                <li>‚Ä¢ Performance optimization techniques</li>
            </ul>
        </div>
    </div>

    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-bold text-gray-800 mb-3">üìã Implementation Guide</h3>
        <div class="space-y-4">
            <div>
                <h4 class="font-semibold text-gray-700 mb-2">1. Game Setup</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1">
                    <li>Create a list of words or read from a file</li>
                    <li>Initialize game variables (word, guessed_letters, attempts)</li>
                    <li>Set up the main game loop</li>
                </ul>
            </div>

            <div>
                <h4 class="font-semibold text-gray-700 mb-2">2. Display Functions</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1">
                    <li>Function to show current word state (e.g., "P_T_")</li>
                    <li>Function to display hangman ASCII art</li>
                    <li>Function to show game status (attempts, guessed letters)</li>
                </ul>
            </div>

            <div>
                <h4 class="font-semibold text-gray-700 mb-2">3. Game Logic</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1">
                    <li>Get and validate user input</li>
                    <li>Check if letter is in the word</li>
                    <li>Update game state accordingly</li>
                    <li>Check win/lose conditions</li>
                </ul>
            </div>

            <div>
                <h4 class="font-semibold text-gray-700 mb-2">4. Error Handling</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1">
                    <li>Handle invalid input (numbers, multiple letters)</li>
                    <li>Handle repeated guesses</li>
                    <li>Graceful error messages</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-bold text-blue-800 mb-3">üé® Sample ASCII Art</h3>
        <pre class="bg-gray-900 text-green-200 rounded p-4 text-sm overflow-x-auto">
  +---+
  |   |
  O   |
 /|\  |
 / \  |
      |
=========</pre>
        <p class="text-sm text-gray-600 mt-2">Create different stages for each wrong guess (0-6 attempts)</p>
    </div>

    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-bold text-purple-800 mb-3">üöÄ Expert Bonus Challenges</h3>
        <ul class="space-y-2 text-gray-700">
            <li>‚Ä¢ Implement a hint system with limited uses</li>
            <li>‚Ä¢ Add persistent high score system with file storage</li>
            <li>‚Ä¢ Create multiple difficulty algorithms (time limits, word complexity)</li>
            <li>‚Ä¢ Add multiplayer support with networking</li>
            <li>‚Ä¢ Implement AI opponent with varying difficulty</li>
            <li>‚Ä¢ Add statistics tracking and analytics</li>
            <li>‚Ä¢ Create a GUI version using tkinter or PyQt</li>
            <li>‚Ä¢ Implement word categories with custom word lists</li>
            <li>‚Ä¢ Add sound effects and visual animations</li>
            <li>‚Ä¢ Create a web version using Flask/Django</li>
        </ul>
    </div>

    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-bold text-indigo-800 mb-3">‚úÖ Success Criteria</h3>
        <ul class="space-y-2 text-gray-700">
            <li>‚úÖ Game runs without errors</li>
            <li>‚úÖ All game requirements are met</li>
            <li>‚úÖ Code is well-organized with functions</li>
            <li>‚úÖ Error handling is implemented</li>
            <li>‚úÖ User experience is smooth</li>
            <li>‚úÖ Code follows Python best practices</li>
        </ul>
    </div>

    <div id="code-editor-container" class="mb-8">
        <!-- Code editor will be injected here -->
    </div>
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
        <span class="font-bold text-lg">ü•á Congratulations!</span> Completing this grand challenge demonstrates your
        mastery of all Advanced Level Python concepts. You're now a Python expert ready for professional development!
    </div>
    <div class="flex justify-between items-center mt-12 pt-8 border-t border-gray-200">
        <a href="#" onclick="loadLesson('lessons/advanced_quiz.html')"
            class="flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200 font-semibold">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Previous: Advanced Level Quiz
        </a>
        <a href="#" onclick="loadLesson('lessons/functional_programming.html')"
            class="flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-semibold">
            Next: Functional Programming
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
</div>

<script type="text/plain" id="default-code-hangman">
import random

# Categorized word lists
WORDS = {
    'animals': ['elephant', 'giraffe', 'penguin', 'kangaroo', 'dolphin', 'tiger', 'panda', 'zebra', 'lion', 'monkey'],
    'fruits': ['banana', 'apple', 'orange', 'grape', 'strawberry', 'pineapple', 'mango', 'kiwi', 'peach', 'watermelon'],
    'countries': ['canada', 'brazil', 'australia', 'japan', 'france', 'germany', 'italy', 'spain', 'mexico', 'india'],
    'colors': ['red', 'blue', 'green', 'yellow', 'purple', 'orange', 'pink', 'brown', 'black', 'white']
}

# Difficulty settings
DIFFICULTY_LIVES = {
    'easy': 8,
    'medium': 6,
    'hard': 4
}

def display_hangman(attempts, max_attempts):
    """Display the hangman ASCII art based on attempts remaining"""
    stages = [
        # Final state: head, torso, both arms, both legs
        """
           +---+
           |   |
           O   |
          /|\  |
          / \  |
               |
        =========
        """,
        # Head, torso, both arms, one leg
        """
           +---+
           |   |
           O   |
          /|\  |
          /    |
               |
        =========
        """,
        # Head, torso, both arms
        """
           +---+
           |   |
           O   |
          /|\  |
               |
               |
        =========
        """,
        # Head, torso, one arm
        """
           +---+
           |   |
           O   |
          /|   |
               |
               |
        =========
        """,
        # Head and torso
        """
           +---+
           |   |
           O   |
           |   |
               |
               |
        =========
        """,
        # Head only
        """
           +---+
           |   |
           O   |
               |
               |
               |
        =========
        """,
        # Initial empty state
        """
           +---+
           |   |
               |
               |
               |
               |
        =========
        """
    ]
    # Calculate which stage to show based on attempts used
    stage_index = max_attempts - attempts
    return stages[stage_index]

def display_word(word, guessed_letters):
    """Display the word with underscores for unguessed letters"""
    display = ''
    for letter in word:
        if letter in guessed_letters:
            display += letter + ' '
        else:
            display += '_ '
    return display.strip()

def get_valid_guess(guessed_letters):
    """Get and validate user input"""
    while True:
        guess = input("Enter a letter: ").lower().strip()
        
        if len(guess) != 1:
            print("‚ùå Please enter exactly one letter.")
            continue
            
        if not guess.isalpha():
            print("‚ùå Please enter a letter (a-z).")
            continue
            
        if guess in guessed_letters:
            print("‚ùå You already guessed that letter. Try again.")
            continue
            
        return guess

def select_category():
    """Let player select a category"""
    print("\nüìö Available Categories:")
    categories = list(WORDS.keys())
    for i, category in enumerate(categories, 1):
        print(f"{i}. {category.title()}")
    
    while True:
        try:
            choice = int(input(f"Select category (1-{len(categories)}): "))
            if 1 <= choice <= len(categories):
                return categories[choice - 1]
            else:
                print("‚ùå Invalid choice. Please select a valid number.")
        except ValueError:
            print("‚ùå Please enter a number.")

def select_difficulty():
    """Let player select difficulty level"""
    print("\nüéØ Difficulty Levels:")
    print("1. Easy (8 lives)")
    print("2. Medium (6 lives)")
    print("3. Hard (4 lives)")
    
    while True:
        try:
            choice = int(input("Select difficulty (1-3): "))
            if choice == 1:
                return 'easy'
            elif choice == 2:
                return 'medium'
            elif choice == 3:
                return 'hard'
            else:
                print("‚ùå Invalid choice. Please select 1, 2, or 3.")
        except ValueError:
            print("‚ùå Please enter a number.")

def play_hangman():
    """Main game function"""
    # Select category and difficulty
    category = select_category()
    difficulty = select_difficulty()
    
    # Set up game
    word = random.choice(WORDS[category])
    guessed_letters = set()
    max_attempts = DIFFICULTY_LIVES[difficulty]
    attempts = max_attempts
    
    print(f"\nüéÆ Starting Hangman Game!")
    print(f"üìö Category: {category.title()}")
    print(f"üéØ Difficulty: {difficulty.title()} ({max_attempts} lives)")
    print(f"üî§ Word length: {len(word)} letters")
    print()
    
    while attempts > 0:
        print(display_hangman(attempts, max_attempts))
        print(f"üìù Word: {display_word(word, guessed_letters)}")
        print(f"üî§ Guessed letters: {' '.join(sorted(guessed_letters)) if guessed_letters else 'None'}")
        print(f"‚ù§Ô∏è  Lives remaining: {attempts}")
        print()
        
        # Check if word is complete
        if all(letter in guessed_letters for letter in word):
            print("üéâ Congratulations! You guessed the word!")
            print(f"‚úÖ The word was: {word}")
            print(f"üìä Lives used: {max_attempts - attempts}")
            return True
        
        # Get user guess
        guess = get_valid_guess(guessed_letters)
        guessed_letters.add(guess)
        
        # Check if guess is correct
        if guess in word:
            count = word.count(guess)
            print(f"‚úÖ Correct! The letter '{guess}' appears {count} time(s) in the word.")
        else:
            attempts -= 1
            print(f"‚ùå Wrong guess! The letter '{guess}' is not in the word.")
            if attempts > 0:
                print(f"üíî You have {attempts} lives remaining.")
    
    # Game over
    print(display_hangman(0, max_attempts))
    print("üíÄ Game Over! You ran out of lives.")
    print(f"üî§ The word was: {word}")
    return False

def main():
    """Main program loop"""
    print("üéÆ Welcome to Hangman!")
    print("Try to guess the word before the hangman is complete.")
    
    while True:
        result = play_hangman()
        
        if result:
            print("üèÜ Great job!")
        else:
            print("üòî Better luck next time!")
        
        play_again = input("\nüîÑ Play again? (y/n): ").lower().strip()
        if play_again != 'y':
            print("üëã Thanks for playing Hangman!")
            break

if __name__ == "__main__":
    main()
</script>